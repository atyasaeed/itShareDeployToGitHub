<div [@routerTransition] class="p-3">
  <app-page-header  [breadCrumbs]="breadcrumbs"></app-page-header>
  <div  class="custom-card p-3 f-weight-600">
    <form  [formGroup]='form' (ngSubmit)="save()">
      <div class="container-fluid">
        <div *tdLoading="'loading';strategy:'overlay'" class=" row">
          <div class="col-md-6">
            <div class="container-fluid">
              <div class="row">
                <div class="form-group" [ngClass]="{'col-md-6':form.controls.state.value!=='','col-md-12':form.controls.state.value===''}">
                    <label>{{'state' | translate }} :&nbsp;</label>
                    <select class="form-control"   formControlName="state">
                      <option value="" disabled >{{'pleaseSelectValue'|translate}}</option>
                      <option class="d-none" [value]="entity?.city?.state">
                        {{lang==='en'? (entity?.city?.state?.enName): (entity?.city?.state?.arName)}}
                      </option>
                      <option *ngFor="let state of states " (click)="stateChanged(state)" [ngValue]="state">
                        {{lang==='en'? (state.enName):(state.arName)}}
                      </option>
                    </select>
                    <div class="text-danger" *ngIf="hasError('state')">
                      <div *ngIf="form.controls.state.errors.required">
                        {{'error.required'|translate}}
                      </div>
                    </div>
                </div>
                <div class="col-md-6 form-group" *ngIf="form.controls.state.value!==''">
                    <label>{{'city' | translate }} :&nbsp;</label>
                    <select class="form-control " formControlName="city">
                      <option value="" disabled >{{'pleaseSelectValue'|translate}}</option>
                      <option class="d-none" [value]="entity?.city">
                        {{lang==='en'? (entity?.city?.enName):(entity?.city?.arName)}}
                      </option>
                      <option *ngFor="let city of cities " [ngValue]="city">
                        {{lang==='en'? (city.enName):(city.arName)}}
                      </option>
                    </select>
                    <div class="text-danger" *ngIf="hasError('city')">
                      <div *ngIf="form.controls.city.errors.required">
                        {{'error.required'|translate}}
                      </div>
                    </div>
                </div>
                <div class="col-md-12 form-group" >
                    <label>{{'lineOne' | translate }} :&nbsp;</label>
                    <input type="text" formControlName="lineOne" class="form-control ">
                    <div class="text-danger" *ngIf="hasError('lineOne')">
                      <div *ngIf="form.controls.lineOne.errors.required">
                        {{'error.required'|translate}}
                      </div>
                      <div *ngIf="form.controls.lineOne.errors.minlength">
                        {{'error.minlength'|translate:'{length:2}'}}
                      </div>
                    </div>
                </div>
                <div class="col-md-12 form-group">
                    <label>{{'lineTwo' | translate }} :&nbsp;</label>
                    <input type="text" formControlName="lineTwo" class="form-control ">
                    <div class="text-danger" *ngIf="hasError('lineTwo')">
                      <div *ngIf="form.controls.lineTwo.errors.required">
                        {{'error.required'|translate}}
                      </div>
                      <div *ngIf="form.controls.lineTwo.errors.minlength">
                        {{'error.minlength'|translate:'{length:2}'}}
                      </div>
                    </div>
                </div>
                <div class="col-md-12 form-group">
                    <label>{{'name' | translate }} :&nbsp;</label>
                    <input type="text" formControlName="name" class="form-control ">
                    <div class="text-danger" *ngIf="hasError('name')">
                      <div *ngIf="form.controls.name.errors.required">
                        {{'error.required'|translate}}
                      </div>
                      <div *ngIf="form.controls.name.errors.minlength">
                        {{'error.minlength'|translate:'{length:2}'}}
                      </div>
                    </div>
                </div>
                <div class="col-md-12 form-group">
                    <label>{{'phoneNumber' | translate }} :&nbsp;</label>
                    <input type="text" formControlName="phoneNo" class="form-control ">
                    <div class="text-danger" *ngIf="hasError('phoneNo')">
                      <div *ngIf="form.controls.phoneNo.errors.required">
                        {{'error.required'|translate}}
                      </div>
                      <div *ngIf="form.controls.phoneNo.errors.minlength">
                        {{'error.minlength'|translate:'{length:11}'}}
                      </div>
                      <div *ngIf="form.controls.phoneNo.errors.pattern">
                        {{'error.pattern'|translate}}
                      </div>
                    </div>
                </div>
                <div class="col-md-12">
                  <button type="button" class="custom-btn v4 mr-2"
                  (click)="cancel()">{{'cancel'|translate}}</button>
                  <button type="submit" class="custom-btn v1 ">{{'save'|translate}}</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
