<article class=" container card">
  <h4 class="text-center">{{service?.name}}
    <h6>Maximum Working Area{{service?.workingArea}}</h6>
  </h4>
  <hr class="mt-0">
  <section class="row">
    <div class=" col-sm-4 my-border">
      <img class="card-img-top" *ngIf="service" [src]="getImageUrl()" alt="Card image cap">
    </div>
    <div class="col-sm-8">
      <section>

        <form class="container" data-toggle="validator" [formGroup]="cartForm" (ngSubmit)="onSubmit()">

          <div>
            <section class="form-row">
              <div class="form-group col-md-6 mb-2">
                <label style="display:block;">Quantity </label>
                <input type="number" min="1" class="form-control" formControlName="quantity">
                <div *ngIf="cartForm.controls.quantity.touched && !cartForm.controls.quantity.valid"
                  class="text-danger">

                  <div *ngIf="cartForm.controls.quantity.errors.required || cartForm.controls.submit">quantity is
                    required
                  </div>
                </div>
              </div>
                <div class="form-group col-sm-6 mb-2" *ngIf="service?.attendance">
                  <label style="display:block;">Attend Manufacturing</label>
                  <label class="switch">
                    <input type="checkbox" formControlName="attend" #attend>
                    <span class="slider round"></span>
                  </label>
                </div>
            </section>
            <section class="form-row">
              <div class="form-group col-sm-6 mb-2" *ngIf="service?.attendance" >
                <label>Starting Date </label>
                <input type="date" class="form-control" formControlName="startingDate" startingDate>
                <div  *ngIf="cartForm.controls.startingDate.touched && !cartForm.controls.startingDate.valid"
                  class="text-danger">
                  <div *ngIf="cartForm.controls.startingDate.errors.required">startingDate is required</div>
                </div>
              </div>
              <div class="form-group col-sm-6 mb-2" *ngIf="service?.attendance">
                <label>Delivery Date </label>
                <input type="date" class="form-control" formControlName="deliveryDate" deliveryDate>
                <div *ngIf="cartForm.controls.deliveryDate.touched && !cartForm.controls.deliveryDate.valid"
                  class="text-danger">
                  <div *ngIf="cartForm.controls.deliveryDate.errors.required">DeliveryDate is required</div>
                </div>
              </div>
              <div class="form-group col-sm-12 mb-2">
                <label>Notes </label>
                <textarea class="form-control" maxlength="251" formControlName="notes" notes maxlength></textarea>
                <div *ngIf="cartForm.controls.notes.touched && !cartForm.controls.notes.valid" class="text-danger">
                  <div *ngIf="cartForm.controls.notes.errors.required">Notes is required</div>
                  <div *ngIf="cartForm.controls.notes.errors.maxlength">Notes Max Length is 250</div>
                </div>
              </div>
            </section>
          </div>
          <div *ngFor="let aFile of file$.controls;let i = index" [formGroup]="aFile" class="card-form">
            <div class="form-title">{{totalFileName[i]||"File "+(i+1)}}</div>
            <div class="form-body">
              <section class="form-row">
                <div class="form-group col-sm-6 mb-2 file">
                  <label>Upload Your Design File</label>
                  <input type="file" class="form-control" formControlName="file" [accept]="extFile"
                    (change)="handleFileInput($event,i)" #file>
                  <span for="file">Upload your Design File</span>
                  <div *ngIf="!aFile.controls.file.valid && submitted" class="text-danger">
                    <div *ngIf="aFile.controls.file.errors.required">file is required</div>
                  </div>
                </div>
                <div class="form-group col-sm-6 mb-2">
                  <label>Units Used In File </label>
                  <select class="form-control" formControlName="unit" unit required>
                    <!-- <option value="" disabled selected hidden>Choose Unit</option> -->
                    <option *ngFor="let unit of service.units">{{unit}}</option>
                  </select>
                  <div
                    *ngIf="aFile.controls.unit.touched && !aFile.controls.unit.valid ||!aFile.controls.unit.valid && submitted"
                    class="text-danger">
                    <div *ngIf="aFile.controls.unit.errors.required">Unit is required</div>
                  </div>
                </div>


              </section>
              <section class="form-row">
                <div class="form-group col-sm-6 mb-2">
                  <label>Material</label>
                  <select class="form-control" formControlName="material" #materialCont>
                    <!-- <option value="" disabled selected hidden>Choose Material</option> -->
                    <option *ngFor="let material of service.materials">{{material.name}}</option>

                  </select>
                  <div *ngIf="aFile.controls.material.touched && !aFile.controls.material.valid " class="text-danger">
                    <div *ngIf="aFile.controls.material.errors.required">material is required</div>
                  </div>
                </div>
                <div class="form-group col-sm-6 mb-2">
                  <label>Type </label>
                  <select class="form-control" formControlName="type" #typeCont>
                    <option *ngFor="let type of service.materials[materialCont.selectedIndex].types">{{type.name}}
                    </option>
                  </select>
                  <div *ngIf="aFile.controls.type.touched && !aFile.controls.type.valid" class="text-danger">
                    <div *ngIf="aFile.controls.type.errors.required">Type is required</div>
                  </div>
                </div>
              </section>
              <section class="form-row">
                <!-- <div>
                  <input type="radio" value="Using" formControlName="status"> Using Our Material<br>
                  <input type="radio" value="Supplying" formControlName="status"> Supplying Material<br>
                </div> -->
              </section>
              <section class="form-row">

                <div class="form-group col-sm-6 mb-2">
                  <label>Color</label>
                  <select class="form-control" class="form-control" formControlName="color">
                    <!-- <option value="" disabled selected hidden>Choose Color</option> -->
                    <option
                      *ngFor="let color of service.materials[materialCont.selectedIndex].types[typeCont.selectedIndex].colors">
                      {{color}}</option>
                  </select>
                  <div *ngIf="aFile.controls.color.touched && !aFile.controls.color.valid" class="text-danger">
                    <div *ngIf="aFile.controls.color.errors.required || aFile.controls.submit">color is required</div>
                  </div>
                </div>
                <div class="form-group col-sm-6 mb-2">
                  <label>Dimension</label>
                  <select class="form-control" class="form-control" formControlName="dimension" dimension>
                    <!-- <option value="" disabled selected hidden>Choose Dimension</option> -->
                    <option
                      *ngFor="let dimension of service.materials[materialCont.selectedIndex].types[typeCont.selectedIndex].dimensions">
                      {{dimension}}</option>
                  </select>
                  <div *ngIf="aFile.controls.dimension.touched && !aFile.controls.dimension.valid " class="text-danger">
                    <div *ngIf="aFile.controls.dimension.errors.required || aFile.controls.submit">dimension is required
                    </div>
                  </div>
                </div>
              </section>
            </div>
          </div>

          <div class="my-border-left ">
            <input type="submit" [disabled]="loading"  data-toggle="tooltip" title="Add to Manufacturing Request"
              data-placement="top" class="btn btn-primary btn-block"
              value="{{'Add to Manufacturing Request'| translate}}">
          </div>

        </form>
      </section>
    </div>
  </section>
  <!--////////////////////////////////////////////////////////////////////////////////////-->
  <hr class="mb-0">
  <div class="card-body" *ngIf="service">
    <h5 class="card-title">Service Description</h5>
    <p class="card-text">
      {{service?.description}}
    </p>
    <div><img [src]="getImageUrl()" alt="" width="100%"></div>
  </div>
</article>
