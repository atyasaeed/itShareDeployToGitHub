<main class="page">
  <section class="shopping-cart dark">
    <div class="container">
      <!-- page Head -->
      <div class="block-heading">
                <h2>I Lab Manufacturing Request</h2>
                <p>Turn your Ideas Into Reality And Change Your Future </p>
      </div>
      <!-- End page Head -->

      <!-- Page Content -->
      <div class="content" *ngIf="!checkItems() && checkItems() !=null">

        <div class="row" >

          <!-- Cart Items Table -->
          <div class="col-md-12 col-lg-8">
            <div class="items">

              <!-- One Item Row -->
              <div class="product" *ngFor="let item of items,let itemIndex=index " >
                <div class="row">
                  <div class="col-md-3 service-image">
                    <img class="img-fluid mx-auto d-block" [src]="getImageUrl(itemIndex)">
                  </div>
                  <div class="col-md-9">
                    <div class="info">

                      <div class="row">
                        <div class="col-md-12 text-center">
                          <h5>
                            <a [routerLink]="['/CartItem']"
                            [queryParams]="{service:item.service.id}">{{item.service.name}}</a>
                          </h5>

                        </div>
                      </div>

                      <div class="row">
                        <div class="col-md-6 product-name">
                          <div class="product-name">

                            <div class="product-info">
                              <div *ngIf = "item?.estimatedStardDate">{{ 'Start Date' | translate }}: <span class="value">{{item.estimatedStardDate | date:'dd-MM-yyyy'}}</span></div>
                              <div *ngIf = "item?.estimatedEndDate">{{ 'estimatedEndDate' | translate }}: <span class="value">{{item.estimatedEndDate | date:'dd-MM-yyyy'}}</span></div>
                               <div>{{ 'Price' | translate }}: <span class="value">{{item.unitPrice}}</span></div>
                               <div>{{ 'UnitePrice' | translate }}: <span class="value">{{item.unitPrice|currency:'EGP'}}</span></div>
                               <div> {{ 'TotalPrice' | translate }}:<span class="value">{{item.unitPrice * item.quantity}}</span></div>
                               <div>{{ 'Notes' | translate }}: <span class="value">{{item.notes}}</span></div>


                            </div>
                          </div>
                        </div>

                        <div class="col-md-4 quantity">
                          <label for="quantity">{{ 'Quantity' | translate }}: </label>
                          <input id="quantity" type="number" min="1" [disabled]="loading" (change)="updateItem(item)"
                            [(ngModel)]="item.quantity" #quantity='ngModel' class="form-control quantity-input">
                        </div>

                        <div class="col-md-2 price">
                          <!-- <span>$120</span> -->
                          <button type="button" [disabled]="loading" class="btn btn-outline-danger btn-xs"
                            (click)="deletItem(item.id)">
                            <i class="fa fa-trash" aria-hidden="true"></i>
                          </button>

                        </div>
                      </div>

                      <div class="row" *ngFor="let file of item.files ;index as i" class="card-form">
                        <div class="form-title">{{ 'Digital Material' | translate }}: <span class="value"><a
                          [href]="getFileUrl(itemIndex,i)">{{file.asset_name}}</a></span></div>
                        <div class="form-body">
                             <div>{{'Type' | translate }}: <span class="value">{{file.type |titlecase}}</span></div>
                              <div>{{'Material' | translate }}:  <span class="value">{{file.material |titlecase}}</span></div>
                              <div>{{'Dimension' | translate }}: <span class="value">{{file.dimension |titlecase}}</span></div>
                              <div>{{'Color' | translate }}: <span class="value">{{file.color |titlecase}}</span></div>
                               <div></div>
                              </div>
                      </div>
                      <hr>
                    </div>

                  </div>
                </div>
              </div>
              <!-- End One Item Row -->

            </div>
          </div>
          <!-- End Cart Items Table -->

          <!-- Cart Summary & Checkout -->
          <div class="col-md-12 col-lg-4">
            <div class="summary">
              <h3>{{'Summary' | translate }}:</h3>
              <div class="summary-item"><span class="text">{{'total' | translate }}:</span><span class="price">{{getSubTotal() |currency:'EGP'}}</span></div>
              <!-- <div class="summary-item"><span class="text">Discount</span><span class="price">$0</span></div>
                            <div class="summary-item"><span class="text">Shipping</span><span class="price">$0</span></div>
                            <div class="summary-item"><span class="text">Total</span><span class="price">$360</span></div> -->
                            <button type="button" class="btn btn-primary btn-lg btn-block" (click)="checkout()">{{ 'Checkout' | translate }}</button>
            </div>
          </div>
          <!-- End Cart Summary & Checkout -->

        </div>
      </div>
      <!-- End Page Content -->
      <div class="text-center" *ngIf="checkItems()">
        please Select Service To Create Your ShoppingCart
      </div>

    </div>
  </section>
</main>
