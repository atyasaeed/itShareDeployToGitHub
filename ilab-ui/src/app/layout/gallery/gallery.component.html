<div [@routerTransition]>
  <div class="container px-0">
    <app-page-header [heading]="'Programs'" [icon]="'fa-bar-chart-o'" [breadCrumbs]="breadcrumbs"></app-page-header>
  </div>


  <main class="page">
    <section class="shopping-cart dark">

      <!-- page Head -->
      <div class="block-heading">
        <h2 class="text-center">{{'brand.gallery'|translate}}</h2>
        <!-- <p>{{'Turn your Ideas Into Reality And Change Your Future'|translate}}</p> -->
      </div>
      <!-- End page Head -->

      <!-- Page Content -->
      <!-- <div class="container">
          <div class="form-group form-inline">
            <input class="form-control  mt-2" type="text" placeholder="{{'Search'|translate}}" name="searchTerm"
              [(ngModel)]="searchTerm" />
            <span class="ml-3" *ngIf="service.loading$ | async">Loading...</span>
          </div>
        </div> -->

      <div class="container">
        <ng-container *ngIf="(entities$|async)?.length!=0 else anonymous">
          <div class="content">
            <form>



              <div class="row light-grey-background">

                <!-- Cart Items Table -->
                <div class="col-md-12 ">
                  <div class="items">

                    <!-- One Item Row -->
                    <div class="product mt-3 pb-3" *ngFor="let entity of entities$ | async ; index as i">
                      <div class="row">
                        <div class="col-md-3 service-image mb-3 mb-md-0">
                          <!-- <img class="img-fluid mx-auto d-block" [src]="getImageUrl(entity)"> -->
                          <!-- <img class="img-fluid " [src]="getFileExtension(entity)"
                            *ngIf="getFileExtension(entity) != false;else serviceImage">
                          <ng-template #serviceImage>
                            <img class="img-fluid " [src]="appConfig.serviceImage(entity.service)">
                          </ng-template> -->
                          <img class="img-fluid " [src]="appConfig.FILE_URL + entity.files[0].asset_id"
                          *ngIf="getFileExtension(entity) == 'image';else stlExtension">
                          <ng-template #stlExtension>
                            <div *ngIf="getFileExtension(entity) == 'stl';else serviceImage">
                              <stl-model-viewer [stlModels]="[appConfig.FILE_URL + entity.files[0].asset_id]">
                              </stl-model-viewer>
                            </div>
                          </ng-template>
                          <ng-template #serviceImage>
                            <img class="img-fluid " [src]="appConfig.serviceImage(entity.service)">
                          </ng-template>
                        </div>
                        <div class="col-md-9">
                          <div class="info">

                            <div class="row">
                              <div class="col-md-12 ">
                                <h5>
                                  <a class="text-primary">{{entity.service.name}}</a>
                                </h5>

                              </div>
                            </div>

                            <div class="row">
                              <div class="col-md-12 product-name">
                                <div class="product-name">

                                  <div class="product-info row ">
                                    <section class="col-md-8 my-auto">
                                      <!-- <div *ngIf="entity?.estimatedStardDate">{{ 'Start Date' | translate }}: <span
                                          class="value">{{entity.estimatedStardDate |date:'fullDate'}}</span></div>
                                      <div *ngIf="entity?.estimatedEndDate">{{ 'Estimated End Date' | translate }}:
                                        <span class="value">{{entity.estimatedEndDate |date:'fullDate'}}</span></div>
                                      <div>{{ 'Price' | translate }}: <span class="value">{{entity.unitPrice}}</span>
                                      </div> -->
                                      <div *ngIf="entity.notes"><label>{{ 'notes' | translate }} :&nbsp;</label>
                                        <span>{{(entity.notes.length>80)? (entity.notes | slice:0:80)+'....':(entity.notes)}}</span>
                                      </div>
                                      <div><label>{{ 'quantity' | translate }} :&nbsp;</label>
                                        <span>{{entity.quantity}}</span>
                                      </div>
                                    </section>
                                    <section class="col-md-4">
                                      <div class="text-md-right text-center">
                                        <a class="btn btn-outline-success btn-xs" [href]="getFileUrl(entity)">
                                          <i class="fa fa-download" aria-hidden="true"></i>
                                        </a>
                                        <button color="primary" class="btn btn-outline-primary btn-xs ml-3"
                                          (click)="addLineItem(entity)">
                                          <i class="fa fa-cart-plus" aria-hidden="true"></i>
                                        </button>
                                        <button *ngIf="hasAdminRole" (click)="removeItem(entity.id,i)"
                                          aria-label="Example icon button with a delete icon"
                                          class="btn btn-outline-danger btn-xs ml-3">
                                          <i class="fa fa-trash" aria-hidden="true"></i>
                                        </button>

                                      </div>
                                    </section>

                                  </div>
                                </div>
                              </div>
                            </div>

                            <div class="mt-3  card-form " *ngFor="let file of entity.files ;index as j">
                              <!-- <div class="form-title">{{ 'Digital Material' | translate }}: <span class="value"><a
                                    [href]="getFileUrl(entity,j)">{{file.asset_name}}</a></span></div> -->
                              <div class="form-body row">
                                <div class="col-md-6 " *ngIf="file.height">
                                  <div><label>{{'file.height' | translate }} :&nbsp;</label> <span>{{file.height }}</span>
                                  </div>
                                </div>
                                <div class="col-md-6 " *ngIf="file.width">
                                  <div><label>{{'file.width' | translate }} :&nbsp;</label> <span>{{file.width }}</span>
                                  </div>
                                </div>
                                <div class="col-md-6 " *ngIf="file.material">
                                  <div><label>{{'file.material' | translate }} :&nbsp;</label>
                                    <span>{{file.material }}</span>
                                  </div>
                                </div>
                                <div class="col-md-6 " *ngIf="file.color">
                                  <div><label>{{'file.color' | translate }} :&nbsp;</label> <span>{{file.color }}</span>
                                  </div>
                                </div>
                                <div class="col-md-6 " *ngIf="file.thickness">
                                  <div><label>{{'file.thickness' | translate }} :&nbsp;</label>
                                    <span>{{file.thickness }}</span>
                                  </div>
                                </div>
                                <div class="col-md-6 " *ngIf="file.type">
                                  <div><label>{{'file.type' | translate }} :&nbsp;</label><span>{{file.type }}</span>
                                  </div>
                                </div>
                                <div class="col-md-6 " *ngIf="file.unit">
                                  <div><label>{{'file.unit' | translate }} :&nbsp;</label><span>{{file.unit }}</span>
                                  </div>
                                </div>
                                <div class="col-md-6 " *ngIf="file.processes">
                                  <div><label>{{'file.processes' | translate }} :&nbsp;</label>
                                    <span>{{file.processes }}</span>
                                  </div>
                                </div>

                              </div>
                            </div>



                          </div>
                        </div>
                      </div>

                    </div>
                    <!-- End One Item Row -->

                  </div>
                </div>
                <!-- End Cart Items Table -->


              </div>
              <div class="d-flex justify-content-between p-2">
                <ngb-pagination [collectionSize]="(total$ | async)!" [(page)]="service.page"
                  [pageSize]="service.pageSize">
                </ngb-pagination>

                <select class="custom-select" style="width: auto" name="pageSize" [(ngModel)]="service.pageSize">
                  <option [ngValue]="10">10 items per page</option>
                  <option [ngValue]="25">25 items per page</option>
                  <option [ngValue]="50">50 items per page</option>
                </select>
              </div>

            </form>

          </div>
        </ng-container>
        <!-- End Page Content -->
        <ng-template #anonymous>
          <div class="text-center">
            {{'please Select Service To Create Your ShoppingCart'|translate}}

          </div>
        </ng-template>

      </div>
    </section>
  </main>
</div>
