<div [@routerTransition]>
  <app-page-header [heading]="'Programs'" [icon]="'fa-bar-chart-o'" [breadCrumbs]="breadcrumbs"></app-page-header>
  <main class="page">
    <section class="shopping-cart dark">
      <div class="container">
        <!-- page Head -->
        <div class="block-heading">
          <h2>{{'brand.gallery'|translate}}</h2>
          <!-- <p>{{'Turn your Ideas Into Reality And Change Your Future'|translate}}</p> -->
        </div>
        <!-- End page Head -->

        <!-- Page Content -->
        <ng-container *ngIf="(entities$|async)?.length!=0 else anonymous">
          <div class="content">
            <form>

              <div class="form-group form-inline">
                <input class="form-control ml-2 mt-2" type="text" placeholder="{{'Search'|translate}}" name="searchTerm"
                  [(ngModel)]="searchTerm" />
                <span class="ml-3" *ngIf="service.loading$ | async">Loading...</span>
              </div>

              <div class="row">

                <!-- Cart Items Table -->
                <div class="col-md-12 col-lg-11">
                  <div class="items">

                    <!-- One Item Row -->
                    <div class="product" *ngFor="let entity of entities$ | async ; index as i">
                      <div class="row">
                        <div class="col-md-3 service-image">
                          <img class="img-fluid mx-auto d-block" [src]="getImageUrl(entity)">
                        </div>
                        <div class="col-md-9">
                          <div class="info">

                            <div class="row">
                              <div class="col-md-12 text-center">
                                <h5>
                                  <a style="color: #3f51b5;">{{entity.service.name}}</a>
                                </h5>

                              </div>
                            </div>

                            <div class="row">
                              <div class="col-md-12 product-name">
                                <div class="product-name">

                                  <div class="product-info row">
                                    <section class="col-6">
                                      <div *ngIf="entity?.estimatedStardDate">{{ 'Start Date' | translate }}: <span
                                          class="value">{{entity.estimatedStardDate |date:'fullDate'}}</span></div>
                                      <div *ngIf="entity?.estimatedEndDate">{{ 'Estimated End Date' | translate }}:
                                        <span class="value">{{entity.estimatedEndDate |date:'fullDate'}}</span></div>
                                      <div>{{ 'Price' | translate }}: <span class="value">{{entity.unitPrice}}</span>
                                      </div>
                                      <div>{{ 'Quantity' | translate }}: <span class="value">{{entity.quantity}}</span>
                                      </div>
                                    </section>
                                    <section class="col-6">
                                      <div *ngIf="entity.unitPrice">{{ 'Unite Price' | translate }}: <span
                                          class="value">{{entity.unitPrice|currency:'EGP'}}</span></div>
                                      <div> {{ 'Total Price' | translate }}:<span
                                          class="value">{{entity.unitPrice * entity.quantity}}</span></div>
                                      <div>{{ 'Notes' | translate }}: <span class="value">{{entity.notes}}</span></div>


                                    </section>

                                  </div>
                                </div>
                              </div>
                            </div>

                            <div class="row" *ngFor="let file of entity.files ;index as j" class="card-form">
                              <div class="form-title">{{ 'Digital Material' | translate }}: <span class="value"><a
                                    [href]="getFileUrl(entity,j)">{{file.asset_name}}</a></span></div>
                              <div class="form-body row">
                                <section class="col-6">
                                  <div>{{'Type' | translate }}: <span class="value">{{file.type |titlecase}}</span>
                                  </div>
                                  <div>{{'Material' | translate }}: <span
                                      class="value">{{file.material |titlecase}}</span>
                                  </div>
                                </section>
                                <section class="col-6">
                                  <div>{{'Dimension' | translate }}: <span
                                      class="value">{{file.dimension |titlecase}}</span>
                                  </div>
                                  <div>{{'Color' | translate }}: <span class="value">{{file.color |titlecase}}</span>
                                  </div>
                                </section>


                              </div>
                            </div>
                            <div class="text-right mt-2">
                              <button mat-raised-button color="primary" class=" pos-but"
                                (click)="addLineItem(entity)">Add
                                to Cart</button>
                              <button mat-fab color="warn" *ngIf="hasAdminRole" (click)="removeItem(entity.id,i)"
                                aria-label="Example icon button with a delete icon">
                                <mat-icon>delete</mat-icon>
                              </button>

                            </div>

                            <hr>
                          </div>
                        </div>
                      </div>

                    </div>
                    <!-- End One Item Row -->

                  </div>
                </div>
                <!-- End Cart Items Table -->


              </div>
              <div class="d-flex justify-content-between p-2">
                <ngb-pagination [collectionSize]="(total$ | async)!" [(page)]="service.page"
                  [pageSize]="service.pageSize">
                </ngb-pagination>

                <select class="custom-select" style="width: auto" name="pageSize" [(ngModel)]="service.pageSize">
                  <option [ngValue]="10">10 items per page</option>
                  <option [ngValue]="25">25 items per page</option>
                  <option [ngValue]="50">50 items per page</option>
                </select>
              </div>

            </form>

          </div>
        </ng-container>
        <!-- End Page Content -->
        <ng-template #anonymous>
          <div style="text-align: center;">
            <!-- {{'please Select Service To Create Your ShoppingCart'|translate}} -->

          </div>
        </ng-template>

      </div>
    </section>
  </main>
</div>
